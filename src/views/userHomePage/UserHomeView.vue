<script setup lang="ts">
import { useRouter } from 'vue-router'
import { ElMessage } from 'element-plus'


import { reactive, ref } from 'vue'
import { ElDrawer, ElMessageBox } from 'element-plus'

const formLabelWidth = '80px'

// ‰∏™‰∫∫‰ø°ÊÅØ UserInformation
let timerUserInformation: any;
const dialogUserInformation = ref(false)
const loadingUserInformation = ref(false)
const formUserInformation = reactive({
    name: '',
    region: '',
    date1: '',
    date2: '',
    delivery: false,
    type: [],
    resource: '',
    desc: '',
})
const onClickUserInformation = () => {
    loadingUserInformation.value = true
    setTimeout(() => {
        loadingUserInformation.value = false
        dialogUserInformation.value = false
    }, 400)
}
const handleCloseUserInformation = (done) => {
    if (loadingUserInformation.value) {
        return
    }
    ElMessageBox.confirm('Do you want to submit?')
        .then(() => {
            loadingUserInformation.value = true
            timerUserInformation = setTimeout(() => {
                done()
                // Âä®ÁîªÂÖ≥Èó≠ÈúÄË¶Å‰∏ÄÂÆöÁöÑÊó∂Èó¥
                setTimeout(() => {
                    loadingUserInformation.value = false
                }, 400)
            }, 2000)
        })
        .catch(() => {
            // catch error
        })
}
const cancelFormUserInformation = () => {
    loadingUserInformation.value = false
    dialogUserInformation.value = false
    clearTimeout(timerUserInformation)
}
// -------‰∏™‰∫∫‰ø°ÊÅØ UserInformation




// ÊàëÁöÑÁª¥‰øÆ
const handleClick = () => {
    console.log('click')
}

const tableData = [
    {
        date: '2016-05-03',
        name: 'Tom',
        state: 'California',
        city: 'Los Angeles',
        address: 'No. 189, Grove St, Los Angeles',
        zip: 'CA 90036',
        tag: 'Home',
    },
    {
        date: '2016-05-02',
        name: 'Tom',
        state: 'California',
        city: 'Los Angeles',
        address: 'No. 189, Grove St, Los Angeles',
        zip: 'CA 90036',
        tag: 'Office',
    },
    {
        date: '2016-05-04',
        name: 'Tom',
        state: 'California',
        city: 'Los Angeles',
        address: 'No. 189, Grove St, Los Angeles',
        zip: 'CA 90036',
        tag: 'Home',
    },
    {
        date: '2016-05-01',
        name: 'Tom',
        state: 'California',
        city: 'Los Angeles',
        address: 'No. 189, Grove St, Los Angeles',
        zip: 'CA 90036',
        tag: 'Office',
    },
    {
        date: '2016-05-01',
        name: 'Tom',
        state: 'California',
        city: 'Los Angeles',
        address: 'No. 189, Grove St, Los Angeles',
        zip: 'CA 90036',
        tag: 'Office',
    },
    {
        date: '2016-05-01',
        name: 'Tom',
        state: 'California',
        city: 'Los Angeles',
        address: 'No. 189, Grove St, Los Angeles',
        zip: 'CA 90036',
        tag: 'Office',
    },
    {
        date: '2016-05-01',
        name: 'Tom',
        state: 'California',
        city: 'Los Angeles',
        address: 'No. 189, Grove St, Los Angeles',
        zip: 'CA 90036',
        tag: 'Office',
    },
]
// -----------ÊàëÁöÑÁª¥‰øÆ





const router = useRouter()

// Ê®°ÊãüÁî®Êà∑Êï∞ÊçÆ
const user = reactive({
    name: 'Âº†‰∏â',
    phone: '13812345678',
    address: 'ÊúùÈò≥Â∞èÂå∫1Ê†ã2ÂçïÂÖÉ301',
    balance: 1500,
    dueFee: 80
})

// Ê®°ÊãüËΩ¶‰Ωç‰ø°ÊÅØ
const parkingInfo = reactive({
    status: true,
    number: 'A-001'
})

// Ê®°ÊãüÂÖ¨ÂëäÂàóË°®
const notices = reactive([
    {
        id: 1,
        title: 'ÂÖ≥‰∫éÁâ©‰∏öË¥πË∞ÉÊï¥ÁöÑÈÄöÁü•',
        content: 'Ëá™2025Âπ¥4ÊúàËµ∑ÔºåÁâ©‰∏öË¥πË∞ÉÊï¥‰∏∫ÊØèÊúà150ÂÖÉ',
        time: '2025-03-15'
    },
    {
        id: 2,
        title: 'Á§æÂå∫ÂÆâÂÖ®ÂçáÁ∫ßÂÖ¨Âëä',
        content: 'Êñ∞Â¢û‰∫∫ËÑ∏ËØÜÂà´Èó®Á¶ÅÁ≥ªÁªüÔºå3Êúà20Êó•ÂêØÁî®',
        time: '2025-03-10'
    }
])

// ÈÄÄÂá∫ÁôªÂΩï
const handleLogout = () => {
    ElMessage.success('ÈÄÄÂá∫ÊàêÂäü')
    router.push('/login')
}





// ÂØºÂÖ• ÊàëÊµãËØïaxiosÊòØÂê¶ÊàêÂäü
import { getUserListService } from '@/api/UserApi.ts'



// BÁ´ôÁöÑÂ§¥ÈÉ®Èº†Ê†áË∑üÈöèÁßªÂä®Âä®Áîª
import { onMounted } from 'vue';
import BilibiliJS from './bilibiliAnimation/bilibili.js'
onMounted(async () => {

    // ÊàëÊµãËØïaxiosÊòØÂê¶ÊàêÂäü
    const res = await getUserListService();
    console.log(res);



    BilibiliJS();
});
// ---------BÁ´ôÂ§¥ÈÉ®Èº†Ê†áÁßªÂä®Âä®ÁîªÂà∞ËøôÈáå‰∏∫Ê≠¢







</script>

<template>
    <div class="home-container">
        <!-- <div id="MyappBiliBili">loading...</div> -->
        <!-- <div id="selectBox"></div> -->





        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <el-header id="MyappBiliBili" class="header">
            <div class="logo">Á§æÂå∫ÁÆ°ÁêÜÁ≥ªÁªü üê±‚Äçüêâ</div>
            <div class="user-info">
                <el-dropdown trigger="click">
                    <span class="user-name">Ê¨¢ËøéÊÇ®üòÄÔºå{{ user.name }}</span>
                    <template #dropdown>
                        <el-dropdown-menu>
                            <el-dropdown-item @click="handleLogout">ÈÄÄÂá∫ÁôªÂΩï</el-dropdown-item>
                        </el-dropdown-menu>
                    </template>
                </el-dropdown>
            </div>
        </el-header>

        <!-- ‰∏ª‰ΩìÂÜÖÂÆπ -->
        <el-main class="content">
            <el-row :gutter="20">
                <!-- ‰∏™‰∫∫‰ø°ÊÅØ -->
                <el-col :span="6">
                    <div class="my-card-container">
                        <!-- <el-card shadow="hover" class="module-card"> -->
                        <!-- <template #header> -->
                        <div class="Mycard-header">‰∏™‰∫∫‰ø°ÊÅØ üê∏</div>
                        <!-- </template> -->
                        <div class="Mycard-content">
                            <div class="info-item Mycard-itemH">
                                <span>ÂßìÂêçÔºö</span>{{ user.name }}
                            </div>
                            <div class="info-item">
                                <span>ÁîµËØùÔºö</span>{{ user.phone }}
                            </div>
                            <!-- <div class="info-item">
                                <span>Âú∞ÂùÄÔºö</span>{{ user.address }}
                            </div> -->
                            <!-- <el-button type="primary" @click="$router.push('/profile')">Êü•Áúã/ÁºñËæë</el-button> -->
                            <!-- ‰∏™‰∫∫‰ø°ÊÅØ -->
                            <!-- <el-button type="primary" plain @click="dialogUserInformation = true">Êü•Áúã/ÁºñËæë</el-button> -->
                            <el-drawer v-model="dialogUserInformation" title="‰∏™‰∫∫‰ø°ÊÅØ üê±‚Äçüèç"
                                :before-close="handleCloseUserInformation" direction="ltr" class="demo-drawer">
                                <div class="demo-drawer__content">
                                    <el-form :model="formUserInformation">
                                        <el-form-item label="Name" :label-width="formLabelWidth">
                                            <el-input v-model="formUserInformation.name" autocomplete="off" />
                                        </el-form-item>
                                        <el-form-item label="Area" :label-width="formLabelWidth">
                                            <el-select v-model="formUserInformation.region"
                                                placeholder="Please select activity area">
                                                <el-option label="Area1" value="shanghai" />
                                                <el-option label="Area2" value="beijing" />
                                            </el-select>
                                        </el-form-item>
                                    </el-form>
                                    <div class="demo-drawer__footer">
                                        <el-button @click="cancelFormUserInformation">Cancel</el-button>
                                        <el-button type="primary" :loading="loadingUserInformation"
                                            @click="onClickUserInformation">
                                            {{ loadingUserInformation ? 'Submitting ...' : 'Submit' }}
                                        </el-button>
                                    </div>
                                </div>
                            </el-drawer>
                        </div>
                        <!-- </el-card> -->
                    </div>
                </el-col>

                <!-- ËΩ¶‰Ωç‰ø°ÊÅØ -->
                <el-col :span="6">
                    <div class="my-card-container">
                        <!-- <el-card shadow="hover" class="module-card"> -->
                        <!-- <template #header> -->
                        <div class="Mycard-header">ËΩ¶‰Ωç‰ø°ÊÅØ</div>
                        <!-- </template> -->
                        <div class="Mycard-content">
                            <div class="info-item Mycard-itemH">
                                <span>ÂΩìÂâçËΩ¶‰ΩçÔºö</span>{{ parkingInfo.status ? 'Â∑≤Ë¥≠‰π∞' : 'Êú™Ë¥≠‰π∞' }}
                            </div>
                            <div v-if="parkingInfo.status" class="info-item">
                                <span>ËΩ¶‰ΩçÁºñÂè∑Ôºö</span>{{ parkingInfo.number }}
                            </div>
                            <!-- <el-button type="primary" @click="$router.push('/parking')">Êü•ÁúãËΩ¶‰Ωç</el-button> -->

                            <!-- <el-button text @click="table = true">Open Drawer with nested table</el-button> -->

                        </div>
                        <!-- </el-card> -->
                    </div>
                </el-col>



                <!-- Áº¥Ë¥π‰ø°ÊÅØ -->
                <el-col :span="6">
                    <div class="my-card-container">
                        <!-- <el-card shadow="hover" class="module-card"> -->
                        <!-- <template #header> -->
                        <div class="Mycard-header">Áº¥Ë¥π‰ø°ÊÅØ</div>
                        <!-- </template> -->
                        <div class="Mycard-content">
                            <div class="info-item Mycard-itemH">
                                <span>Ë¥¶Êà∑‰ΩôÈ¢ùÔºö</span>{{ user.balance }} ÂÖÉ
                            </div>
                            <div class="info-item">
                                <span>ÂæÖÁº¥Ë¥πÁî®Ôºö</span>{{ user.dueFee }} ÂÖÉ
                            </div>
                            <!-- <el-button type="primary" @click="$router.push('/payment')">Á´ãÂç≥Áº¥Ë¥π</el-button> -->
                        </div>
                        <!-- </el-card> -->
                    </div>
                </el-col>

                <!-- ËÆæÂ§áÊä•‰øÆ -->
                <el-col :span="6">
                    <div class="my-card-container">
                        <!-- <el-card shadow="hover" class="module-card"> -->
                        <!-- <template #header> -->
                        <div class="Mycard-header">ËÆæÂ§áÊä•‰øÆ</div>
                        <!-- </template> -->
                        <div class="Mycard-content">
                            <div class="info-item Mycard-itemH">
                                <span>Ë¥¶Êà∑‰ΩôÈ¢ùÔºö</span>{{ user.balance }} ÂÖÉ
                            </div>
                            <div class="info-item">
                                <span>ÂæÖÁº¥Ë¥πÁî®Ôºö</span>{{ user.dueFee }} ÂÖÉ
                            </div>
                            <!-- <el-button type="primary" @click="$router.push('/repair')">Êèê‰∫§Êä•‰øÆÁî≥ËØ∑</el-button> -->
                        </div>
                        <!-- </el-card> -->
                    </div>
                </el-col>
            </el-row>

            <el-row :gutter="20">
                <el-col :span="12">
                    <div class="fourCard">
                        <div class="fourCarditem swing">
                            <div>
                                <div>
                                    <img src="@/assets/Èí±ÂåÖ.svg" alt="" style="width: 40px;">
                                </div>
                                <div>Êñ∞Áª¥‰øÆ</div>
                            </div>
                        </div>
                        <div class="fourCarditem swing">
                            <div>
                                <div>
                                    <img src="@/assets/Èí±ÂåÖ.svg" alt="" style="width: 40px;">
                                </div>
                                <div>‰π∞ËΩ¶‰Ωç</div>
                            </div>
                        </div>
                        <div class="fourCarditem swing">
                            <div>
                                <div>
                                    <img src="@/assets/Èí±ÂåÖ.svg" alt="" style="width: 40px;">
                                </div>
                                <div>ÁúãË¥¶Âçï</div>
                            </div>
                        </div>
                        <div class="fourCarditem swing">
                            <div>
                                <div>
                                    <img src="@/assets/Èí±ÂåÖ.svg" alt="" style="width: 40px;">
                                </div>
                                <div>Êîπ‰ø°ÊÅØ</div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <el-card shadow="hover" class="notice-card">
                            <template #header>
                                <div class="card-header">ÊàëÁöÑÁª¥‰øÆ</div>
                            </template>
                            <div class="">
                                <el-table :data="tableData" height="187" style="width: 100%">
                                    <el-table-column fixed prop="date" label="Date" width="150" />
                                    <el-table-column prop="name" label="Name" width="120" />
                                    <el-table-column prop="state" label="State" width="120" />
                                    <el-table-column prop="city" label="City" width="120" />
                                    <el-table-column prop="address" label="Address" width="600" />
                                    <el-table-column prop="zip" label="Zip" width="120" />
                                    <el-table-column fixed="right" label="Operations" min-width="120">
                                        <template #default>
                                            <el-button link type="primary" size="small" @click="handleClick">
                                                Detail
                                            </el-button>
                                            <el-button link type="primary" size="small">Edit</el-button>
                                        </template>
                                    </el-table-column>
                                </el-table>
                            </div>
                        </el-card>
                    </div>
                </el-col>
                <el-col :span="12">
                    <div class="noticeAll">
                        <el-timeline style="max-width: 610px">
                            <el-timeline-item timestamp="2018/4/12" placement="top">
                                <el-card>
                                    <h4>ÂÖ≥‰∫éÁâ©‰∏öË¥πË∞ÉÊï¥ÁöÑÈÄöÁü•</h4>
                                    <p>Ëá™2025Âπ¥4ÊúàËµ∑ÔºåÁâ©‰∏öË¥πË∞ÉÊï¥‰∏∫ÊØèÊúà150ÂÖÉ</p>
                                </el-card>
                            </el-timeline-item>
                            <el-timeline-item timestamp="2018/4/3" placement="top">
                                <el-card>
                                    <h4>Á§æÂå∫ÂÆâÂÖ®ÂçáÁ∫ßÂÖ¨Âëä</h4>
                                    <p>Êñ∞Â¢û‰∫∫ËÑ∏ËØÜÂà´Èó®Á¶ÅÁ≥ªÁªüÔºå3Êúà20Êó•ÂêØÁî®</p>
                                </el-card>
                            </el-timeline-item>
                            <el-timeline-item timestamp="2018/4/2" placement="top">
                                <el-card>
                                    <h4>Update Github template</h4>
                                    <p>Tom committed 2018/4/2 20:46</p>
                                </el-card>
                            </el-timeline-item>
                            <el-timeline-item timestamp="2018/4/2" placement="top">
                                <el-card>
                                    <h4>Update Github template</h4>
                                    <p>Tom committed 2018/4/2 20:46</p>
                                </el-card>
                            </el-timeline-item>
                            <el-timeline-item timestamp="2018/4/2" placement="top">
                                <el-card>
                                    <h4>Update Github template</h4>
                                    <p>Tom committed 2018/4/2 20:46</p>
                                </el-card>
                            </el-timeline-item>
                        </el-timeline>
                    </div>
                    <!-- <el-card shadow="hover" class="notice-card">
                        <template #header>
                            <div class="card-header">ÊúÄÊñ∞ÂÖ¨Âëä</div>
                        </template>
                        <div class="notice-list">
                            <div v-for="notice in notices" :key="notice.id" class="notice-item">
                                <div class="notice-title">{{ notice.title }}</div>
                                <div class="notice-content">{{ notice.content }}</div>
                                <div class="notice-time">{{ notice.time }}</div>
                            </div>
                        </div>
                    </el-card> -->
                </el-col>
            </el-row>

            <!-- <el-row :gutter="20">
                ÂÖ¨Âëä‰ø°ÊÅØ
                <el-col :xs="24" :sm="24" :md="24">
                    <el-card shadow="hover" class="notice-card">
                        <template #header>
                            <div class="card-header">ÊúÄÊñ∞ÂÖ¨Âëä</div>
                        </template>
                        <div class="notice-list">
                            <div v-for="notice in notices" :key="notice.id" class="notice-item">
                                <div class="notice-title">{{ notice.title }}</div>
                                <div class="notice-content">{{ notice.content }}</div>
                                <div class="notice-time">{{ notice.time }}</div>
                            </div>
                        </div>
                    </el-card>
                </el-col>
            </el-row> -->
        </el-main>
    </div>
</template>

<style scoped>
.my-card-container {
    border-radius: 20px;
    border: solid 0.8px #e4e7ed;
    margin-bottom: 15px;
    transition: box-shadow 0.3s ease;
    /* Ê∑ªÂä†ËøáÊ∏°ÊïàÊûú */
}

.my-card-container:hover {
    box-shadow: 0 0px 25px rgba(116, 149, 179, 0.2);
    /* Èº†Ê†áÊÇ¨ÂÅúÊó∂Â¢ûÂä†Èò¥ÂΩ± */
}

.swing:hover {
    animation: swing .4s infinite linear both;
}

@keyframes swing {
    20% {
        transform: rotate3d(0, 0, 1, 5deg);
    }

    40% {
        transform: rotate3d(0, 0, 1, -3deg);
    }

    60% {
        transform: rotate3d(0, 0, 1, 2deg);
    }

    80% {
        transform: rotate3d(0, 0, 1, -1deg);
    }

    to {
        transform: rotate3d(0, 0, 1, 0deg);
    }
}







.noticeAll {
    /* max-width: 600px; */
    /* ‰øùÊåÅÂéüÊúâÁöÑÂÆΩÂ∫¶ÈôêÂà∂ */
    max-height: 396px;
    /* ËÆæÁΩÆ‰∏Ä‰∏™Âõ∫ÂÆöÁöÑÈ´òÂ∫¶ */
    overflow-y: auto;
    /* ÂÖÅËÆ∏ÂûÇÁõ¥ÊªöÂä® */

    background-image:
        url('@/assets/4d37acea06841ace858f27cab3a5596d9fdd8354.png@1c.webp'),
        url('@/assets/d4d4569741806055f36c4d9140bdd7069a50ec09.png@1c.webp');
    /* ÊõøÊç¢‰∏∫‰Ω†ÁöÑÂõæÁâáË∑ØÂæÑ */
    background-size: 160%;
    /* ËÉåÊôØÂõæÁâáË¶ÜÁõñÊï¥‰∏™ÂÖÉÁ¥† */
    background-position:
        -196px 285px,
        -166px 0px;
    /* ËÉåÊôØÂõæÁâáÂ±Ö‰∏≠ */
    background-repeat: no-repeat;
    /* ËÉåÊôØÂõæÁâá‰∏çÈáçÂ§ç */
}

/* Ëá™ÂÆö‰πâÊªöÂä®Êù°Ê†∑Âºè */
.noticeAll::-webkit-scrollbar {
    width: 6px;
    /* ÊªöÂä®Êù°ÂÆΩÂ∫¶ */
}

.noticeAll::-webkit-scrollbar-track {
    background: white;
    /* ËΩ®ÈÅìËÉåÊôØËâ≤ */
}

.noticeAll::-webkit-scrollbar-thumb {
    background: rgb(232, 226, 226);
    /* ÊªëÂùóËÉåÊôØËâ≤ */
    border-radius: 10px;
    /* ÊªëÂùóÂúÜËßí */
}

.noticeAll::-webkit-scrollbar-thumb:hover {
    background: #555;
    /* ÊªëÂùóÊÇ¨ÂÅúËÉåÊôØËâ≤ */
}

.noticeAll::-webkit-scrollbar-button {
    background: #ddd;
    /* ÊåâÈíÆËÉåÊôØËâ≤ */
    display: none;
    /* ÈöêËóèÊåâÈíÆ */
}




.fourCard {
    gap: 10px;
    display: flex;
    margin-bottom: 20px;
}

.fourCard>div {
    width: 250px;
    height: 90px;
    border-radius: 8px;


    border: solid rgb(230, 221, 221) 0.5px;
}

.fourCarditem {
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    /* Ê∑ªÂä†Â∫ïÈÉ®Èò¥ÂΩ± */
    transition: box-shadow 0.3s ease;
    /* Ê∑ªÂä†ËøáÊ∏°ÊïàÊûú */
}

.fourCarditem:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    /* Èº†Ê†áÊÇ¨ÊµÆÊó∂Â¢ûÂä†Èò¥ÂΩ± */
}


.home-container {
    min-height: 100vh;
    /* background-color: #f5f7fa; */
}

.header {
    height: 75px;
    padding: 0 20px;
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    font-size: 25px;
    color: white;
    font-weight: 600;

    z-index: 1000;
}

.user-info {
    display: flex;
    align-items: center;
    z-index: 1000;
}

.user-name {
    cursor: pointer;
    margin-right: 10px;
    /* font-weight: 550; */
    font-size: 16px;
    color: white;
}

.content {
    padding: 20px;
}

.module-card {
    margin-bottom: 15px;
    border-radius: 20px;
}

.card-header {
    font-size: 16px;
    color: #333;
    font-weight: 500;
}

.Mycard-header {
    font-size: 16px;
    color: #333;
    font-weight: 500;

    padding: 16px;
    border-bottom: solid 0.8px #e4e7ed;
}

.Mycard-content {
    padding: 16px;
}

.Mycard-itemH {
    margin-bottom: 12px;
}

.info-item {
    /* margin-bottom: 12px; */
    /* line-height: 5; */
}

.notice-card {
    /* margin-top: 20px; */
}

.notice-list {
    max-height: 300px;
    overflow-y: auto;
}

.notice-item {
    padding: 10px;
    border-bottom: 1px solid #eee;
}

.notice-title {
    font-weight: 600;
    margin-bottom: 5px;
}

.notice-time {
    color: #999;
    font-size: 12px;
    margin-top: 5px;
}

/* ÂìçÂ∫îÂºèÂ∏ÉÂ±Ä */
@media (max-width: 768px) {
    .module-card {
        margin-bottom: 15px;
    }
}




/* BÁ´ôÂ§¥ÈÉ®Èº†Ê†áÂä®Áîªcss */
#MyappBiliBili {
    position: relative;
    overflow: hidden;
    margin: 0 auto;
    min-width: 1000px;
    /* min-height: 155px; */
    /* height: 10vw; */
    /* max-height: 240px; */

    height: 110px;
}

.layer {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

img {
    user-select: none;
    pointer-events: none;
}

#selectBox>button {
    margin-right: 1em;
}

/* ---------BÁ´ôÂä®ÁîªÂà∞ËøôÈáå‰∏∫Ê≠¢ */
</style>
